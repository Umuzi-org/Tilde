{% extends "frontend/user/base.html" %}

{# TODO: Load the first page immediately, even if it's a small page. This should reduce lighthouse timing for first contentful paint #}

{% block main %}
    <style>
        .column-container {
            flex: 1 0 auto;
            display: flex;
            flex-direction: column;
            position: relative;
        }

        .column-content {
            flex: 1 1 auto;
            max-height: 450px; 
            margin-left: -1px; 
        }

        .sticky {
            position: sticky;
            top: 0;
            z-index: 10;
            margin-left: -1px; 
            text-align: center;
            border-top-left-radius: 8px;
            border-top-right-radius: 8px;
            background-color: white;
            padding: 0.5rem;
        }
    </style>

    <div class="grid grid-cols-5 gap-4 overflow-x-scroll">
        {% for column in columns %}
        <div class="column-container">
            <h2 class="{{ styles.heading2 }} sticky top-0 bg-white z-10">{{column.title}}</h2>

            <div 
                class="p-3 ring-1 ring-gray-200 mx-1 mb-1 shadow bg-white overflow-y-scroll column-content"
                id="column_{{column.id}}"
                hx-get="{% url 'view_partial_user_board_column' user.id column.id %}"
                hx-trigger="load"
                hx-target="#column_{{column.id}}"
                hx-swap="beforeend"
            ></div>
        </div>
        {% endfor %}
    </div>
{% endblock %}
